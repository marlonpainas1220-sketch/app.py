<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Influencer Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .loading { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
        input:focus { outline: none; border-color: #8b5cf6; }
    </style>
</head>
<body class="bg-[#050505] text-white font-sans antialiased">
    <div class="max-w-md mx-auto p-6 space-y-8">
        <header class="text-center py-4">
            <h1 class="text-3xl font-black bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600">INFLUENCER IA</h1>
            <p class="text-zinc-500 text-xs mt-2 uppercase tracking-tighter">Sistema de Geração Blindado</p>
        </header>

        <div class="bg-zinc-900/50 border border-zinc-800 p-6 rounded-[2.5rem] space-y-6">
            <div>
                <label class="text-[10px] font-bold text-zinc-500 uppercase ml-2">Roteiro da Influencer</label>
                <textarea id="script" class="w-full bg-zinc-800/50 border border-zinc-700 rounded-2xl p-4 mt-1 text-sm h-32" placeholder="Digite aqui o que ela deve falar..."></textarea>
            </div>

            <div class="space-y-3">
                <button onclick="runIA('video')" id="vbtn" class="w-full bg-white text-black h-14 rounded-2xl font-bold active:scale-95 transition">GERAR REELS (VIDEO)</button>
                <button onclick="runIA('photo')" id="pbtn" class="w-full bg-zinc-800 text-white h-14 rounded-2xl font-bold active:scale-95 transition">GERAR FOTO</button>
            </div>
        </div>

        <div id="loader" class="hidden text-center space-y-4">
            <div class="loading text-purple-500 text-sm font-medium">Sincronizando fisionomia e voz...</div>
            <div class="w-full bg-zinc-800 h-1 rounded-full overflow-hidden">
                <div class="bg-purple-600 h-full w-1/3 animate-[loading_2s_infinite]"></div>
            </div>
        </div>
    </div>

    <script>
        async function runIA(mode) {
            const script = document.getElementById('script').value;
            if(!script) return alert("Insira o roteiro!");
            
            document.getElementById('loader').classList.remove('hidden');
            document.getElementById('vbtn').disabled = true;

            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ prompt: script, mode: mode, face_url: "SUA_FOTO_AQUI" })
                });
                const res = await response.json();
                alert("Conteúdo gerado com sucesso!");
            } catch (e) {
                alert("Erro na renderização. Tente novamente.");
            } finally {
                document.getElementById('loader').classList.add('hidden');
                document.getElementById('vbtn').disabled = false;
            }
        }
    </script>
</body>
</html>
